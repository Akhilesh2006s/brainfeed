(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[287],{12337:(e,t,a)=>{"use strict";a.d(t,{T:()=>i});var s=a(82901),r=a(94065),l=a(6464);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});i.displayName="Textarea"},14197:(e,t,a)=>{"use strict";a.d(t,{p:()=>i});var s=a(82901),r=a(94065),l=a(6464);let i=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});i.displayName="Input"},18334:(e,t,a)=>{Promise.resolve().then(a.bind(a,23025))},19411:(e,t,a)=>{"use strict";a.d(t,{J:()=>n});var s=a(82901),r=a(94065),l=a(37534),i=a(95063),d=a(6464);let c=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.b,{ref:t,className:(0,d.cn)(c(),a),...r})});n.displayName=l.b.displayName},23025:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var s=a(82901),r=a(94065),l=a(22406),i=a(80593),d=a(81363),c=a(14197),n=a(12337),o=a(19411),h=a(19651),x=a(7404),m=a(18285),u=a(28238),p=a(6464);let f=h.bL;h.YJ;let j=h.WT,g=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(h.l9,{ref:t,className:(0,p.cn)("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,s.jsx)(h.In,{asChild:!0,children:(0,s.jsx)(x.A,{className:"h-4 w-4 opacity-50"})})]})});g.displayName=h.l9.displayName;let b=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(h.PP,{ref:t,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(m.A,{className:"h-4 w-4"})})});b.displayName=h.PP.displayName;let w=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(h.wn,{ref:t,className:(0,p.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(x.A,{className:"h-4 w-4"})})});w.displayName=h.wn.displayName;let v=r.forwardRef((e,t)=>{let{className:a,children:r,position:l="popper",...i}=e;return(0,s.jsx)(h.ZL,{children:(0,s.jsxs)(h.UC,{ref:t,className:(0,p.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,s.jsx)(b,{}),(0,s.jsx)(h.LM,{className:(0,p.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(w,{})]})})});v.displayName=h.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(h.JU,{ref:t,className:(0,p.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=h.JU.displayName;let N=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(h.q7,{ref:t,className:(0,p.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(h.VF,{children:(0,s.jsx)(u.A,{className:"h-4 w-4"})})}),(0,s.jsx)(h.p4,{children:r})]})});N.displayName=h.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(h.wv,{ref:t,className:(0,p.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=h.wv.displayName;var y=a(93235),k=a(76929),S=a(60284),A=a(84019),C=a(86053),F=a(40989),R=a(62748),T=a(68427),J=a(17752),Z=a(30479);function I(){let e=(0,l.useRouter)(),{toast:t}=(0,A.dj)(),[a,h]=(0,r.useState)(null),[x,m]=(0,r.useState)([]),[u,p]=(0,r.useState)([]),[b,w]=(0,r.useState)([]),[I,q]=(0,r.useState)(!0),[B,E]=(0,r.useState)(""),[P,L]=(0,r.useState)(""),[W,H]=(0,r.useState)(""),[U,_]=(0,r.useState)(""),[O,V]=(0,r.useState)(""),[D,z]=(0,r.useState)(""),[X,M]=(0,r.useState)(""),[Y,$]=(0,r.useState)("5"),[G,K]=(0,r.useState)(!1);(0,r.useEffect)(()=>{Q()},[]);let Q=async()=>{try{let t=await fetch(C.FH.auth.me.path);if(!t.ok)return void e.push("/login");let a=await t.json();if("writer"!==a.role)return void("admin"===a.role?e.push("/admin/dashboard"):e.push("/login"));h(a),await Promise.all([ee(a.id),et(),ea()])}catch(t){e.push("/login")}finally{q(!1)}},ee=async e=>{try{let t=await fetch("".concat(C.FH.articles.list.path,"?writerId=").concat(e)),a=await t.json();m(a)}catch(e){t({title:"Error",description:"Failed to fetch articles",variant:"destructive"})}},et=async()=>{try{let e=await fetch(C.FH.categories.list.path),t=await e.json();p(t)}catch(e){console.error("Failed to fetch categories:",e)}},ea=async()=>{try{let e=await fetch("/api/authors"),t=await e.json();w(t)}catch(e){console.error("Failed to fetch authors:",e)}},es=async()=>{try{await fetch(C.FH.auth.logout.path,{method:"POST"}),e.push("/login")}catch(e){console.error("Logout error:",e)}},er=e=>e.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").trim(),el=async e=>{e.preventDefault(),K(!0);try{let e=await fetch(C.FH.articles.create.path,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:B,slug:P,excerpt:W,content:U,coverImage:O,categoryId:parseInt(D),authorId:parseInt(X),readTime:parseInt(Y)})}),s=await e.json();e.ok?(t({title:"Success",description:s.message}),E(""),L(""),H(""),_(""),V(""),z(""),M(""),$("5"),a&&await ee(a.id)):t({title:"Error",description:s.message||"Failed to create article",variant:"destructive"})}catch(e){t({title:"Error",description:"An error occurred while creating the article",variant:"destructive"})}finally{K(!1)}},ei=x.reduce((e,t)=>e+t.clicks,0),ed=x.filter(e=>"approved"===e.status).length,ec=x.filter(e=>"pending"===e.status).length;return I?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center text-slate-900 dark:text-white",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,s.jsx)("p",{children:"Loading..."})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-4 md:p-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Writer Dashboard"}),(0,s.jsxs)("p",{className:"text-slate-600 dark:text-slate-400",children:["Welcome back, ",null==a?void 0:a.name,"!"]})]}),(0,s.jsxs)(d.$,{variant:"outline",onClick:es,className:"w-full sm:w-auto border-slate-200 dark:border-slate-700 hover:bg-slate-100 dark:hover:bg-slate-800",children:[(0,s.jsx)(F.A,{className:"mr-2 h-4 w-4"}),"Logout"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,s.jsxs)(i.Zp,{className:"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm hover:shadow-md transition-shadow",children:[(0,s.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ZB,{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Articles"}),(0,s.jsx)(R.A,{className:"h-4 w-4 text-slate-400 dark:text-slate-500"})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:x.length})})]}),(0,s.jsxs)(i.Zp,{className:"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm hover:shadow-md transition-shadow",children:[(0,s.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ZB,{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Approved"}),(0,s.jsx)(T.A,{className:"h-4 w-4 text-green-600 dark:text-green-500"})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:ed})})]}),(0,s.jsxs)(i.Zp,{className:"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm hover:shadow-md transition-shadow",children:[(0,s.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ZB,{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Pending"}),(0,s.jsx)(J.A,{className:"h-4 w-4 text-yellow-600 dark:text-yellow-500"})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:ec})})]}),(0,s.jsxs)(i.Zp,{className:"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-sm hover:shadow-md transition-shadow",children:[(0,s.jsxs)(i.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(i.ZB,{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Clicks"}),(0,s.jsx)(Z.A,{className:"h-4 w-4 text-blue-600 dark:text-blue-500"})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsx)("div",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:ei})})]})]}),(0,s.jsxs)(y.tU,{defaultValue:"articles",className:"space-y-4",children:[(0,s.jsxs)(y.j7,{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800",children:[(0,s.jsx)(y.Xi,{value:"articles",className:"data-[state=active]:bg-slate-100 dark:data-[state=active]:bg-slate-800 data-[state=active]:text-slate-900 dark:data-[state=active]:text-white",children:"My Articles"}),(0,s.jsx)(y.Xi,{value:"create",className:"data-[state=active]:bg-slate-100 dark:data-[state=active]:bg-slate-800 data-[state=active]:text-slate-900 dark:data-[state=active]:text-white",children:"Create New Article"})]}),(0,s.jsx)(y.av,{value:"articles",children:(0,s.jsxs)(i.Zp,{className:"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-lg",children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{className:"text-slate-900 dark:text-white",children:"Your Articles"}),(0,s.jsx)(i.BT,{className:"text-slate-600 dark:text-slate-400",children:"View analytics and status of your published articles"})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)(k.XI,{children:[(0,s.jsx)(k.A0,{children:(0,s.jsxs)(k.Hj,{children:[(0,s.jsx)(k.nd,{children:"Title"}),(0,s.jsx)(k.nd,{children:"Category"}),(0,s.jsx)(k.nd,{children:"Status"}),(0,s.jsx)(k.nd,{children:"Clicks"}),(0,s.jsx)(k.nd,{children:"Published"})]})}),(0,s.jsx)(k.BF,{children:0===x.length?(0,s.jsx)(k.Hj,{children:(0,s.jsx)(k.nA,{colSpan:5,className:"text-center text-muted-foreground",children:"No articles yet. Create your first article!"})}):x.map(e=>{var t;return(0,s.jsxs)(k.Hj,{children:[(0,s.jsx)(k.nA,{className:"font-medium",children:e.title}),(0,s.jsx)(k.nA,{children:e.category.name}),(0,s.jsx)(k.nA,{children:(t=e.status,(0,s.jsx)(S.E,{variant:{pending:"secondary",approved:"default",rejected:"destructive"}[t]||"outline",children:t}))}),(0,s.jsx)(k.nA,{children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(Z.A,{className:"mr-1 h-4 w-4"}),e.clicks]})}),(0,s.jsx)(k.nA,{children:new Date(e.publishedAt).toLocaleDateString()})]},e.id)})})]})})]})}),(0,s.jsx)(y.av,{value:"create",children:(0,s.jsxs)(i.Zp,{className:"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 shadow-lg",children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)(i.ZB,{className:"text-slate-900 dark:text-white",children:"Create New Article"}),(0,s.jsx)(i.BT,{className:"text-slate-600 dark:text-slate-400",children:"Submit a new article for admin approval"})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)("form",{onSubmit:el,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"title",children:"Title *"}),(0,s.jsx)(c.p,{id:"title",value:B,onChange:e=>{var t;E(t=e.target.value),P&&P!==er(B)||L(er(t))},placeholder:"Enter article title",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"slug",children:"Slug *"}),(0,s.jsx)(c.p,{id:"slug",value:P,onChange:e=>L(e.target.value),placeholder:"article-slug",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"excerpt",children:"Excerpt *"}),(0,s.jsx)(n.T,{id:"excerpt",value:W,onChange:e=>H(e.target.value),placeholder:"Brief description of the article",rows:3,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"content",children:"Content *"}),(0,s.jsx)(n.T,{id:"content",value:U,onChange:e=>_(e.target.value),placeholder:"Full article content",rows:10,required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"coverImage",children:"Cover Image URL *"}),(0,s.jsx)(c.p,{id:"coverImage",value:O,onChange:e=>V(e.target.value),placeholder:"https://example.com/image.jpg",type:"url",required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"category",children:"Category *"}),(0,s.jsxs)(f,{value:D,onValueChange:z,required:!0,children:[(0,s.jsx)(g,{children:(0,s.jsx)(j,{placeholder:"Select category"})}),(0,s.jsx)(v,{children:u.map(e=>(0,s.jsx)(N,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"author",children:"Author *"}),(0,s.jsxs)(f,{value:X,onValueChange:M,required:!0,children:[(0,s.jsx)(g,{children:(0,s.jsx)(j,{placeholder:"Select author"})}),(0,s.jsx)(v,{children:b.map(e=>(0,s.jsx)(N,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(o.J,{htmlFor:"readTime",children:"Read Time (minutes) *"}),(0,s.jsx)(c.p,{id:"readTime",type:"number",value:Y,onChange:e=>$(e.target.value),min:"1",required:!0})]})]}),(0,s.jsx)(d.$,{type:"submit",className:"w-full",disabled:G,children:G?"Submitting...":"Submit Article"})]})})]})})]})]})})}}},e=>{e.O(0,[721,430,342,808,666,394,552,544,659,358],()=>e(e.s=18334)),_N_E=e.O()}]);